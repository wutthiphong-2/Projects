# Activity Log System - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏∞‡∏ö‡∏ö

## üìä ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß

### ‚úÖ Backend (100%)
- SQLite database ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö logs ‡∏ñ‡∏≤‡∏ß‡∏£
- API endpoints ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå
- Logging ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å action (Web + AD)
- Thailand timezone
- Auto-reconnect LDAP

### ‚úÖ Frontend (100%)
- ‡∏´‡∏ô‡πâ‡∏≤ Activity Log ‡∏û‡∏£‡πâ‡∏≠‡∏° filters
- Dashboard ‡πÅ‡∏™‡∏î‡∏á recent activities
- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î before/after values
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö action types ‡∏Ñ‡∏£‡∏ö

### ‚úÖ AD Event Sync (100%)
- PowerShell script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô Event Log ‡∏ö‡∏ô DC
- Configuration management
- API endpoint ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å script
- ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏ö

---

## üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Activity Log

### 1. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö (‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)

‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ action:
- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö User
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
- ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ OU

**‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏µ:** ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß, ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô, ‡πÅ‡∏î‡∏á

### 2. ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô AD (‡∏ú‡πà‡∏≤‡∏ô PowerShell Script ‡∏ö‡∏ô DC)

PowerShell script ‡∏£‡∏±‡∏ô‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ:
- ‡∏≠‡πà‡∏≤‡∏ô Windows Security Event Log
- ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤ Backend API
- Backend ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á database

**‡πÅ‡∏™‡∏î‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏µ:** ‡∏°‡πà‡∏ß‡∏á (AD)

---

## üìÇ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### Backend:
```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activity_log.py         # Core logging functions
‚îÇ   ‚îî‚îÄ‚îÄ routers/
‚îÇ       ‚îî‚îÄ‚îÄ activity_logs.py        # API endpoints
‚îú‚îÄ‚îÄ activity_log.db                 # SQLite database (‡∏ñ‡∏≤‡∏ß‡∏£)
‚îú‚îÄ‚îÄ sync_ad_events.ps1              # PowerShell script (‡∏£‡∏±‡∏ô‡∏ö‡∏ô DC)
‚îú‚îÄ‚îÄ sync_config.json                # Configuration
‚îú‚îÄ‚îÄ get_token.ps1                   # Helper: Get API token
‚îú‚îÄ‚îÄ SETUP_AD_EVENT_SYNC.md          # ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
‚îú‚îÄ‚îÄ QUICK_START_DC_SYNC.md          # Quick start guide
‚îî‚îÄ‚îÄ GET_API_TOKEN.md                # ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ get token
```

### Frontend:
```
frontend/src/components/
‚îú‚îÄ‚îÄ ActivityLog.js                  # ‡∏´‡∏ô‡πâ‡∏≤ Activity Log
‚îú‚îÄ‚îÄ ActivityLog.css                 # Styles
‚îî‚îÄ‚îÄ Dashboard.js                    # ‡πÅ‡∏™‡∏î‡∏á recent activities
```

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin:

1. **‡∏î‡∏π Activity Log:**
   - ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å "Activity Log" ‡πÉ‡∏ô Sidebar
   - ‡∏Å‡∏£‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, Action type, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà

2. **‡∏î‡∏π Recent Activities:**
   - Dashboard ‚Üí ‡∏Å‡∏≤‡∏£‡πå‡∏î "Recent Activities"
   - ‡πÅ‡∏™‡∏î‡∏á 10 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:

1. **‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å** - ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
2. **‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç AD ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** - ‡πÄ‡∏ß‡πâ‡∏ô‡πÅ‡∏ï‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

---

## üìã ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ö‡∏ô Domain Controller (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)

### Quick Steps:

1. **Copy ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ DC:**
   - `sync_ad_events.ps1`
   - `sync_config.json`
   - `get_token.ps1`
   
   ‚Üí ‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà `C:\ADEventSync\`

2. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç config:**
   - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `backend_url` ‡πÄ‡∏õ‡πá‡∏ô IP ‡∏Ç‡∏≠‡∏á Backend

3. **Get API Token:**
   ```powershell
   cd C:\ADEventSync
   .\get_token.ps1
   ```

4. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
   ```powershell
   .\sync_ad_events.ps1
   ```

5. **‡∏ï‡∏±‡πâ‡∏á Scheduled Task:**
   - ‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏ô `QUICK_START_DC_SYNC.md`
   - ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Task Scheduler GUI

**‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!** üéä

---

## üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

‡πÅ‡∏ï‡πà‡∏•‡∏∞ activity log ‡∏°‡∏µ:
- ‚è∞ **Timestamp** (‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏ó‡∏¢)
- üë§ **User** (‡πÉ‡∏Ñ‡∏£‡∏ó‡∏≥ - username ‡∏à‡∏£‡∏¥‡∏á)
- üéØ **Action** (‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£)
- üéØ **Target** (‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£/‡∏≠‡∏∞‡πÑ‡∏£)
- üìù **Details** (‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î including before/after values)
- üåê **IP/Source** (‡∏ó‡∏≥‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏´‡∏ô - Web ‡∏´‡∏£‡∏∑‡∏≠ AD)
- ‚úÖ **Status** (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß)

---

## üé® ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô Activity Log

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**

```
üü¢ Admin ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Web) "new.employee"
   28 ‡∏ï.‡∏Ñ. 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:30 ‡∏ô.
   OU: TBKK-Users > IT-K1IT00
   Groups: 3 ‡∏Å‡∏•‡∏∏‡πà‡∏°

üîµ Jane Doe ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Web) "john.doe"
   28 ‡∏ï.‡∏Ñ. 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:25 ‡∏ô.
   ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: Engineer ‚Üí Senior Engineer
   ‡πÅ‡∏ú‡∏ô‡∏Å: IT ‚Üí Development

üü£ TBKK\administrator ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (AD) "mary.jane"
   28 ‡∏ï.‡∏Ñ. 2568 ‡πÄ‡∏ß‡∏•‡∏≤ 14:20 ‡∏ô.
   ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å AD Users & Computers
```

---

## üîí Security & Performance

### ‡πÄ‡∏Å‡πá‡∏ö Logs ‡∏ô‡∏≤‡∏ô‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?

‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:**
- ‡πÄ‡∏Å‡πá‡∏ö 90-180 ‡∏ß‡∏±‡∏ô ‡πÉ‡∏ô database
- Archive logs ‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô CSV
- Backup database ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥

### Database Size

- ~ 1 KB per log entry
- 1,000 entries ~ 1 MB
- 100,000 entries ~ 100 MB

---

## ‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!

‡∏£‡∏∞‡∏ö‡∏ö Activity Log ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:
- ‚úÖ Web-based logging
- ‚úÖ AD Event Log monitoring (via PowerShell)
- ‚úÖ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏£‡∏ö
- ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£
- ‚úÖ Real-time (< 5 ‡∏ô‡∏≤‡∏ó‡∏µ)

**Happy Logging! üéâ**

