# üß™ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API

## üìã ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ

### 1Ô∏è‚É£ **‡πÉ‡∏ä‡πâ Python Script (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**

#### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:

1. **‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `test_api_example.py`**

2. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:**
   ```python
   API_URL = "http://127.0.0.1:8000"  # URL ‡∏Ç‡∏≠‡∏á API
   API_KEY = "ak_xxxxxxxxxxxxxxxxxxx"  # ‚Üê ‡πÉ‡∏™‡πà API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
   ```

3. **‡∏£‡∏±‡∏ô script:**
   ```bash
   python test_api_example.py
   ```

4. **‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
   - Script ‡∏à‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö endpoints ‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏≠‡∏±‡∏ô
   - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡∏•‡∏∞ endpoint
   - ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡∏ó‡πâ‡∏≤‡∏¢

---

## üîë ‡∏ß‡∏¥‡∏ò‡∏µ‡πÑ‡∏î‡πâ API Key

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á

1. **Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö** ‚Üí `http://localhost:3000`
2. **‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ API Management**
3. **‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏™‡∏£‡πâ‡∏≤‡∏á API Key"**
4. **‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:**
   - ‡∏ä‡∏∑‡πà‡∏≠: ‡πÄ‡∏ä‡πà‡∏ô "Test API Key"
   - Permissions: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
   - Rate Limit: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
5. **‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏™‡∏£‡πâ‡∏≤‡∏á"**
6. **‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å API Key** (‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß!)
7. **‡πÉ‡∏™‡πà‡πÉ‡∏ô script**

---

## üìù ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

```python
import requests

API_URL = "http://127.0.0.1:8000"
API_KEY = "ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

url = f"{API_URL}/api/users/"
headers = {"X-API-Key": API_KEY}

response = requests.get(url, headers=headers)
print(response.json())
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```json
[
  {
    "dn": "CN=John Doe,CN=Users,DC=example,DC=com",
    "cn": "John Doe",
    "sAMAccountName": "johndoe",
    "mail": "john.doe@example.com",
    ...
  }
]
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

```python
import requests

API_URL = "http://127.0.0.1:8000"
API_KEY = "ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

url = f"{API_URL}/api/users/"
headers = {"X-API-Key": API_KEY}
params = {"q": "john"}  # ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

response = requests.get(url, headers=headers, params=params)
print(response.json())
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3: ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏∏‡πà‡∏°

```python
import requests

API_URL = "http://127.0.0.1:8000"
API_KEY = "ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

url = f"{API_URL}/api/groups/"
headers = {"X-API-Key": API_KEY}

response = requests.get(url, headers=headers)
print(response.json())
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 4: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ permission `users:write`)

```python
import requests

API_URL = "http://127.0.0.1:8000"
API_KEY = "ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

url = f"{API_URL}/api/users/"
headers = {
    "X-API-Key": API_KEY,
    "Content-Type": "application/json"
}

data = {
    "cn": "Jane Doe",
    "sAMAccountName": "janedoe",
    "mail": "jane.doe@example.com",
    "department": "IT",
    "password": "SecurePassword123!"
}

response = requests.post(url, headers=headers, json=data)
print(response.json())
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 5: ‡πÉ‡∏ä‡πâ cURL

```bash
# ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
curl -X GET "http://127.0.0.1:8000/api/users/" \
  -H "X-API-Key: ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
curl -X GET "http://127.0.0.1:8000/api/users/?q=john" \
  -H "X-API-Key: ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏∏‡πà‡∏°
curl -X GET "http://127.0.0.1:8000/api/groups/" \
  -H "X-API-Key: ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```

---

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 6: ‡πÉ‡∏ä‡πâ JavaScript (Browser)

```javascript
const API_URL = "http://127.0.0.1:8000";
const API_KEY = "ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
fetch(`${API_URL}/api/users/`, {
  headers: {
    'X-API-Key': API_KEY
  }
})
.then(res => res.json())
.then(data => console.log(data))
.catch(error => console.error('Error:', error));
```

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

### 1. **API Key Security:**
- ‚ùå **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏™‡πà API Key ‡πÉ‡∏ô code ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á** (hardcode)
- ‚úÖ **‡πÉ‡∏ä‡πâ Environment Variables** ‡πÅ‡∏ó‡∏ô

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ:**
```python
import os
API_KEY = os.getenv("API_KEY")  # ‚Üê ‡πÉ‡∏ä‡πâ Environment Variable
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏î‡∏µ:**
```python
API_KEY = "ak_abc123..."  # ‚ùå Hardcode - ‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢!
```

---

### 2. **‡πÄ‡∏Å‡πá‡∏ö API Key ‡πÉ‡∏ô Environment Variable:**

**Windows PowerShell:**
```powershell
$env:API_KEY="ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
python test_api_example.py
```

**Linux/Mac:**
```bash
export API_KEY="ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
python test_api_example.py
```

---

### 3. **‡πÉ‡∏ä‡πâ .env file:**

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`:
```
API_KEY=ak_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
API_URL=http://127.0.0.1:8000
```

‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Python:
```python
from dotenv import load_dotenv
import os

load_dotenv()

API_KEY = os.getenv("API_KEY")
API_URL = os.getenv("API_URL")
```

---

## üîç Debugging

### ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ Error 401 (Unauthorized):
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key ‡∏¢‡∏±‡∏á Active ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

### ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ Error 403 (Forbidden):
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Permissions ‡πÉ‡∏ô Tab "API Keys"
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ API Key ‡∏°‡∏µ permission ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö endpoint ‡∏ô‡∏±‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ Error 404 (Not Found):
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡πÅ‡∏•‡∏∞ Endpoint ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ backend ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ Error 429 (Too Many Requests):
- ‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡∏¥‡∏ô rate limit ‡πÅ‡∏•‡πâ‡∏ß
- ‚úÖ ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö rate limit ‡πÉ‡∏ô Tab "API Keys"

---

## ‚úÖ Checklist

‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö:
- [ ] ‡∏°‡∏µ API Key ‡πÅ‡∏•‡πâ‡∏ß
- [ ] ‡∏£‡∏π‡πâ URL ‡∏Ç‡∏≠‡∏á API server
- [ ] ‡∏£‡∏π‡πâ endpoint ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å
- [ ] Backend server ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
- [ ] ‡πÄ‡∏Å‡πá‡∏ö API Key ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

---

## üéØ ‡∏™‡∏£‡∏∏‡∏õ

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

1. **‡πÑ‡∏î‡πâ API Key** (‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ API Management)
2. **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç script** `test_api_example.py`
3. **‡πÉ‡∏™‡πà API Key** ‡πÉ‡∏ô script
4. **‡∏£‡∏±‡∏ô script:**
   ```bash
   python test_api_example.py
   ```
5. **‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå** ‚úÖ

**‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡πÄ‡∏Å‡πá‡∏ö API Key ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡πÅ‡∏ä‡∏£‡πå‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô!

